"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5793],{5793:(M,c,e)=>{e.r(c),e.d(c,{InitialPageModule:()=>O});var u=e(9808),g=e(4182),a=e(3996),l=e(1264),s=e(655),t=e(9863),r=e(3003),f=e(3071),v=e(1188),P=e(2468),C=e(8507);const T=[{path:"",component:(()=>{class n{constructor(o,i,h,p,d,x){this.navCtrl=o,this.toastMessage=i,this.userService=h,this.storageService=p,this.dataService=d,this.waitMessage=x,this.logUser={username:"",password:""}}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){yield this.storageService.init();const o=yield this.storageService.loadUser();o&&null!==o.session_token&&(this.dataService.setUsuarioRegistrado(o),this.navCtrl.navigateRoot("/tab1"))})}login(o){return(0,s.mG)(this,void 0,void 0,function*(){if(o.valid){this.waitMessage.present();try{const i=yield this.userService.login(o,this.dataService.getNotificationID()).toPromise();console.log(i.message),i.success?(yield this.storageService.clear(),this.navCtrl.pop(),this.navCtrl.navigateRoot("/tab1"),this.storageService.set("user",i.data),this.dataService.setUsuarioRegistrado(i.data),this.toastMessage.presentToast(i.message)):(this.logUser.password="",yield this.storageService.clear(),i.message?this.toastMessage.presentToast(i.message):(this.waitMessage.dismiss(),this.toastMessage.presentToast("Se produjo un error al iniciar sesi\xf3n, por favor intenta nuevamente")))}catch(i){console.log("error logeando",i)}}else this.toastMessage.presentToast("Por favor introduce tus credenciales");this.waitMessage.dismiss()})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(a.SH),t.Y36(r.K),t.Y36(f.K),t.Y36(v.V),t.Y36(P.D),t.Y36(C.w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-initial"]],decls:27,vars:2,consts:[[1,"background"],["id","img-logo","src","assets/images/logo-esmarthealth.png"],["fLogin","ngForm"],["mode","md"],["color","primary","slot","start","name","mail-open-outline"],["color","primary","position","floating"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["color","primary","slot","start","name","lock-closed-outline"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["id","buttons"],["color","secondary","expand","block","shape","round",1,"btn",3,"click"],[2,"text-align","center"],["color","secondary","routerLink","/register-band","expand","block","shape","round",1,"btn"],["id","img-qr","src","assets/images/esmartqr.png"]],template:function(o,i){if(1&o){const h=t.EpF();t.TgZ(0,"ion-content",0),t._UZ(1,"ion-img",1),t.TgZ(2,"main"),t.TgZ(3,"h1"),t._uU(4,"\xa1Bienvenido!"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"Para continuar, escanea uno de nuestros c\xf3digos QR \xf3 inicia sesi\xf3n"),t.qZA(),t.TgZ(7,"form",null,2),t.TgZ(9,"ion-item",3),t._UZ(10,"ion-icon",4),t.TgZ(11,"ion-label",5),t._uU(12,"E-mail"),t.qZA(),t.TgZ(13,"ion-input",6),t.NdJ("ngModelChange",function(d){return i.logUser.username=d}),t.qZA(),t.qZA(),t.TgZ(14,"ion-item",3),t._UZ(15,"ion-icon",7),t.TgZ(16,"ion-label",5),t._uU(17,"Contrase\xf1a"),t.qZA(),t.TgZ(18,"ion-input",8),t.NdJ("ngModelChange",function(d){return i.logUser.password=d}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"section",9),t.TgZ(20,"ion-button",10),t.NdJ("click",function(){t.CHM(h);const d=t.MAs(8);return i.login(d)}),t._uU(21," Ingresar "),t.qZA(),t.TgZ(22,"p",11),t._uU(23,"\xf3"),t.qZA(),t.TgZ(24,"ion-button",12),t._uU(25," Registrate "),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"ion-img",13),t.qZA()}2&o&&(t.xp6(13),t.Q6J("ngModel",i.logUser.username),t.xp6(5),t.Q6J("ngModel",i.logUser.password))},directives:[a.W2,a.Xz,g._Y,g.JL,g.F,a.Ie,a.gu,a.Q$,a.pK,a.j9,g.Q7,g.JJ,g.On,a.YG,a.YI,l.rH],styles:["ion-content.background[_ngcontent-%COMP%]{--background: url(medica.66d58fe4bda318e7.png) 0 /100% 100% no-repeat}main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700;font-size:34px;margin-top:15%}ion-content[_ngcontent-%COMP%]{--keyboard-offset: 0px;--offset-bottom: 0px;--offset-top: 0px;--padding-bottom: 0px;--padding-end: 3rem;--padding-start: 2rem;--padding-top: 2rem;margin:10%;font-family:Arial;--background: #bfbfbf}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:10px;height:50px;box-shadow:1px 8px 8px #0000001f;--highlight-height: 0px;margin-bottom:10px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:15px;--pading-top: 15px;--pading-bottom: 15px;--pading-start: 5px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:15px;letter-spacing:.5px;text-decoration:none}#img-logo[_ngcontent-%COMP%]{height:115px;margin-bottom:3rem;margin-left:auto;margin-right:auto}#img-qr[_ngcontent-%COMP%]{position:absolute;width:80px;right:12px;bottom:12px}#buttons[_ngcontent-%COMP%]{margin:1.5rem 0}#header[_ngcontent-%COMP%]{margin-top:50px;font-family:Poppins;display:flex;flex-direction:column;text-align:center}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild(T)],l.Bz]}),n})();var y=e(5879);let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,g.u5,a.Pc,Z,y.TabsPageModule]]}),n})()},3003:(M,c,e)=>{e.d(c,{K:()=>l});var u=e(655),g=e(9863),a=e(3996);let l=(()=>{class s{constructor(r){this.toastController=r}presentToast(r){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:r,duration:4e3})).present()})}}return s.\u0275fac=function(r){return new(r||s)(g.LFG(a.yF))},s.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},8507:(M,c,e)=>{e.d(c,{w:()=>l});var u=e(655),g=e(9863),a=e(3996);let l=(()=>{class s{constructor(r){this.loadingCtrl=r}present(){return(0,u.mG)(this,void 0,void 0,function*(){return this.isLoading=!0,yield this.loadingCtrl.create({message:"Cargando..."}).then(r=>{r.present().then(()=>{this.isLoading||r.dismiss()})})})}dismiss(){return(0,u.mG)(this,void 0,void 0,function*(){return this.isLoading=!1,yield this.loadingCtrl.dismiss()})}}return s.\u0275fac=function(r){return new(r||s)(g.LFG(a.HT))},s.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);