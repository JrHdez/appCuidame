"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7324],{7324:(_,f,r)=>{r.r(f),r.d(f,{Form4PageModule:()=>q});var h=r(9808),m=r(4182),s=r(3996),p=r(1264),a=r(655),e=r(9863),d=r(3071),M=r(3003),A=r(2468),x=r(1188),v=r(8507);function Z(n,c){if(1&n&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.hij("Medicamento ",i,":")}}function P(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div"),e.YNc(1,Z,2,1,"p",19),e.TgZ(2,"ion-item"),e.TgZ(3,"ion-label",20),e._uU(4,"Medicamento"),e.qZA(),e.TgZ(5,"ion-input",21),e.NdJ("ngModelChange",function(o){const g=e.CHM(i).index;return e.oxw().form4Med[g].medicamento=o}),e.qZA(),e.qZA(),e.TgZ(6,"ion-item"),e.TgZ(7,"ion-label",20),e._uU(8,"Laboratorio"),e.qZA(),e.TgZ(9,"ion-input",21),e.NdJ("ngModelChange",function(o){const g=e.CHM(i).index;return e.oxw().form4Med[g].laboratorio=o}),e.qZA(),e.qZA(),e.TgZ(10,"ion-item"),e.TgZ(11,"ion-label",20),e._uU(12,"D\xf3sis"),e.qZA(),e.TgZ(13,"ion-input",21),e.NdJ("ngModelChange",function(o){const g=e.CHM(i).index;return e.oxw().form4Med[g].formula=o}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const i=c.$implicit,t=c.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",1!==o.noMeds),e.xp6(4),e.MGl("name","medicamento",i,""),e.Q6J("ngModel",o.form4Med[t].medicamento),e.xp6(4),e.MGl("name","laboratorio",i,""),e.Q6J("ngModel",o.form4Med[t].laboratorio),e.xp6(4),e.MGl("name","formula",i,""),e.Q6J("ngModel",o.form4Med[t].formula)}}function T(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"p",23),e.NdJ("click",function(){return e.CHM(i),e.oxw().anadirMed(!1)}),e._uU(1,"Quitar"),e.qZA()}}function C(n,c){if(1&n&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.hij("Alergia ",i,":")}}function F(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div"),e.YNc(1,C,2,1,"p",19),e.TgZ(2,"ion-item"),e.TgZ(3,"ion-label",20),e._uU(4,"Tipo de alergia"),e.qZA(),e.TgZ(5,"ion-input",21),e.NdJ("ngModelChange",function(o){const g=e.CHM(i).index;return e.oxw().form5Alergia[g].tipoAlergia=o}),e.qZA(),e.qZA(),e.TgZ(6,"ion-item"),e.TgZ(7,"ion-label",20),e._uU(8,"Descripci\xf3n"),e.qZA(),e.TgZ(9,"ion-input",21),e.NdJ("ngModelChange",function(o){const g=e.CHM(i).index;return e.oxw().form5Alergia[g].descripcion=o}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const i=c.$implicit,t=c.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",1!==o.noAlergias),e.xp6(4),e.MGl("name","tipoAlergia",i,""),e.Q6J("ngModel",o.form5Alergia[t].tipoAlergia),e.xp6(4),e.MGl("name","descripcionAlergia",i,""),e.Q6J("ngModel",o.form5Alergia[t].descripcion)}}function O(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"p",23),e.NdJ("click",function(){return e.CHM(i),e.oxw().anadirAlergia(!1)}),e._uU(1,"Quitar"),e.qZA()}}const b=[{path:"",component:(()=>{class n{constructor(i,t,o,l,g,u,S){this.userService=i,this.navCtrl=t,this.toastMessage=o,this.dataService=l,this.storageService=g,this.route=u,this.waitMessage=S,this.textNextButton="Finalizar",this.noMeds=1,this.listMed=[1],this.noAlergias=1,this.listAlergias=[1],this.check=!0,this.form4Med=[{medicamento:null,laboratorio:null,formula:null}],this.form5Alergia=[{tipoAlergia:null,descripcion:null}]}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.editFlag=this.route.snapshot.paramMap.get("editFlag"),this.setEdit(),yield this.storageService.init(),yield this.getUser()})}setEdit(){if("edit"===this.editFlag){this.title="Editar",this.textNextButton="Guardar";const i=this.dataService.dataPaciente.medAlergias.length-1;this.noMeds=this.dataService.dataPaciente.medAlergias[i-1];for(let t=0;t<this.noMeds;t++)0!==t?(this.listMed.push(t+1),this.form4Med.push(this.dataService.dataPaciente.medAlergias[t])):this.form4Med[0]=this.dataService.dataPaciente.medAlergias[t];this.noAlergias=this.dataService.dataPaciente.medAlergias[i];for(let t=this.noMeds;t<this.noAlergias+this.noMeds;t++)t!==this.noMeds?(this.listAlergias.push(t-this.noMeds+1),this.form5Alergia.push(this.dataService.dataPaciente.medAlergias[t])):this.form5Alergia[0]=this.dataService.dataPaciente.medAlergias[t]}}logOut(){this.navCtrl.navigateRoot("/initial"),this.storageService.clear()}onClickNext(i){return(0,a.mG)(this,void 0,void 0,function*(){if(console.log(this.form4Med),console.log(this.form5Alergia),console.log(this.noMeds,this.listMed),console.log(this.noAlergias,this.listAlergias),console.log(i.form.value),i.valid&&"new"===this.editFlag){this.waitMessage.present(),console.log(i.valid);let t={};try{console.log(this.dataService.getForm1());let o=yield this.userService.createForm(this.dataService.getForm1(),this.user.session_token).toPromise();o.success?this.idPaciente=o.data:this.check=!1,console.log("Registro paciente",o);const l=Object.assign(Object.assign({},this.dataService.getFormCondicion()),{idPaciente:this.idPaciente,enfermedades:this.dataService.formEnf});console.log(l),o=yield this.userService.createForm(l,this.user.session_token).toPromise(),console.log("Registro condicion",o),o.success||(this.check=!1),t={idPaciente:this.idPaciente,antecedentes:this.dataService.form3Ant,form:3},o=yield this.userService.createForm(t,this.user.session_token).toPromise(),console.log("Registro antecedente personal",o),o.success||(this.check=!1),t={idPaciente:this.idPaciente,antecedentesF:this.dataService.form6AntF,form:6},o=yield this.userService.createForm(t,this.user.session_token).toPromise(),console.log("Registro antecedente familiar",o),o.success||(this.check=!1),t={idPaciente:this.idPaciente,medicamentos:this.form4Med,form:4},console.log(t),o=yield this.userService.createForm(t,this.user.session_token).toPromise(),console.log("Registro medciamentos",o),o.success||(this.check=!1),t={idPaciente:this.idPaciente,alergias:this.form5Alergia,form:5},console.log(t),o=yield this.userService.createForm(t,this.user.session_token).toPromise(),console.log("Registro alergias",o),o.success||(this.check=!1),this.check?this.navCtrl.navigateRoot("/tab1"):(this.toastMessage.presentToast("Hubo un error con el registro de la informaci\xf3n"),this.check=!0)}catch(o){console.log("error al subir",o)}}else if("edit"===this.editFlag){let t={};t={idPaciente:this.dataService.currentUserId,medicamentos:this.form4Med,form:4};let o=!0,l=yield this.userService.updateInfo(t,this.user.session_token).toPromise();l.success||(o=!1),t={idPaciente:this.dataService.currentUserId,alergias:this.form5Alergia,form:5},l=yield this.userService.updateInfo(t,this.user.session_token).toPromise(),l.success&&o&&(this.navCtrl.navigateRoot("/tab1"),this.toastMessage.presentToast(l.message))}else this.toastMessage.presentToast("Por favor, revisa el formulario.");this.waitMessage.dismiss()})}anadirMed(i){i?(this.noMeds+=1,this.listMed.push(this.noMeds),this.form4Med.push({medicamento:null,laboratorio:null,formula:null})):(this.noMeds-=1,this.listMed.pop(),this.form4Med.pop())}anadirAlergia(i){i?(this.noAlergias+=1,this.listAlergias.push(this.noAlergias),this.form5Alergia.push({tipoAlergia:null,descripcion:null})):(this.noAlergias-=1,this.listAlergias.pop(),this.form5Alergia.pop())}getUser(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.storageService.loadUser().then(i=>{i&&(this.user=i,console.log("User coming from storage",this.user))}).catch(i=>console.log("Error obteniento user storage",i))})}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(d.K),e.Y36(s.SH),e.Y36(M.K),e.Y36(A.D),e.Y36(x.V),e.Y36(p.gz),e.Y36(v.w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-form4"]],decls:41,vars:6,consts:[[1,"ion-no-border"],["slot","start"],["color","primary"],[1,"background"],["fForm4","ngForm"],["fixed",""],[1,"ion-align-items-center"],[1,"ion-margin"],["mode","md",1,"lista"],["id","listheader"],[4,"ngFor","ngForOf"],[1,"botones"],["id","anadir",3,"click"],["slot","start","name","add"],["id","quitar","style","text-align: end;",3,"click",4,"ngIf"],["no-border",""],[1,"btn-wrapper"],["size","small","fill","outline","color","primary",3,"click"],["slot","end","name","caret-forward-outline"],["class","numeral",4,"ngIf"],["position","floating"],["type","text",3,"name","ngModel","ngModelChange"],[1,"numeral"],["id","quitar",2,"text-align","end",3,"click"]],template:function(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title",2),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content",3),e.TgZ(7,"form",null,4),e.TgZ(9,"ion-grid",5),e.TgZ(10,"ion-row",6),e.TgZ(11,"ion-col"),e.TgZ(12,"p",7),e._uU(13,"A continuaci\xf3n, ingresa los datos de la persona que usar\xe1 la banda de seguridad"),e.qZA(),e.TgZ(14,"ion-list",8),e.TgZ(15,"section"),e.TgZ(16,"p",9),e._uU(17,"Medicamentos: "),e.qZA(),e.YNc(18,P,14,7,"div",10),e.TgZ(19,"div",11),e.TgZ(20,"p",12),e.NdJ("click",function(){return t.anadirMed(!0)}),e._uU(21,"A\xf1adir medicamento "),e._UZ(22,"ion-icon",13),e.qZA(),e.YNc(23,T,2,0,"p",14),e.qZA(),e.qZA(),e.TgZ(24,"section"),e.TgZ(25,"p",9),e._uU(26,"Alergias: "),e.qZA(),e.YNc(27,F,10,5,"div",10),e.TgZ(28,"div",11),e.TgZ(29,"p",12),e.NdJ("click",function(){return t.anadirAlergia(!0)}),e._uU(30,"A\xf1adir alergia "),e._UZ(31,"ion-icon",13),e.qZA(),e.YNc(32,O,2,0,"p",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"ion-footer",15),e.TgZ(34,"ion-toolbar"),e.TgZ(35,"ion-row"),e.TgZ(36,"ion-col"),e.TgZ(37,"div",16),e.TgZ(38,"ion-button",17),e.NdJ("click",function(){e.CHM(o);const g=e.MAs(8);return t.onClickNext(g)}),e._uU(39),e._UZ(40,"ion-icon",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(5),e.Oqu(t.title),e.xp6(13),e.Q6J("ngForOf",t.listMed),e.xp6(5),e.Q6J("ngIf",1!==t.noMeds),e.xp6(4),e.Q6J("ngForOf",t.listAlergias),e.xp6(5),e.Q6J("ngIf",1!==t.noAlergias),e.xp6(7),e.hij(" ",t.textNextButton," "))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,m._Y,m.JL,m.F,s.jY,s.Nd,s.wI,s.q_,h.sg,s.gu,h.O5,s.fr,s.YG,s.Ie,s.Q$,s.pK,s.j9,m.JJ,m.On],styles:["p[_ngcontent-%COMP%]{text-align:left}#label[_ngcontent-%COMP%]{font-weight:700;font-size:20px;margin-bottom:5%;text-align:left;text-align:center}section[_ngcontent-%COMP%]{margin-bottom:15px;background-color:var(--caja-color);border-radius:20px;padding:11px;box-shadow:1px 8px 8px #0000001f}section[_ngcontent-%COMP%]   #listheader[_ngcontent-%COMP%]{margin:0 0 10px;font-weight:700;color:var(--ion-color-primary)}section[_ngcontent-%COMP%]   .numeral[_ngcontent-%COMP%]{font-size:12px;margin:0 3px 5px 0}section[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}section[_ngcontent-%COMP%]   #quitar[_ngcontent-%COMP%]{font-size:12px;margin:0 3px;color:var(--ion-color-danger)}section[_ngcontent-%COMP%]   #anadir[_ngcontent-%COMP%]{font-size:12px;margin:0 3px;color:var(--ion-color-primary)}.lista[_ngcontent-%COMP%]{background-color:transparent}ion-content.background[_ngcontent-%COMP%]{--background: url(medico3.30e8d5aff161b47e.png) 0 0/100% 100% no-repeat}ion-content[_ngcontent-%COMP%]{font-family:Arial;--background: #bfbfbf}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:10px;height:50px;box-shadow:1px 8px 8px #0000001f;--highlight-height: 0px;margin-bottom:10px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:15px;--pading-top: 15px;--pading-bottom: 15px;--pading-start: 5px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:15px;letter-spacing:.5px;text-decoration:none}.btn-wrapper[_ngcontent-%COMP%]{text-align:end}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(b)],p.Bz]}),n})(),q=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,m.u5,s.Pc,y]]}),n})()},3003:(_,f,r)=>{r.d(f,{K:()=>p});var h=r(655),m=r(9863),s=r(3996);let p=(()=>{class a{constructor(d){this.toastController=d}presentToast(d){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:d,duration:4e3})).present()})}}return a.\u0275fac=function(d){return new(d||a)(m.LFG(s.yF))},a.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},8507:(_,f,r)=>{r.d(f,{w:()=>p});var h=r(655),m=r(9863),s=r(3996);let p=(()=>{class a{constructor(d){this.loadingCtrl=d}present(){return(0,h.mG)(this,void 0,void 0,function*(){return this.isLoading=!0,yield this.loadingCtrl.create({message:"Cargando..."}).then(d=>{d.present().then(()=>{this.isLoading||d.dismiss()})})})}dismiss(){return(0,h.mG)(this,void 0,void 0,function*(){return this.isLoading=!1,yield this.loadingCtrl.dismiss()})}}return a.\u0275fac=function(d){return new(d||a)(m.LFG(s.HT))},a.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);